(()=>{"use strict";class n{constructor(e="lu5-console"){this.box=window._get_or_create_by_id&&window._get_or_create_by_id("div",e),this.box.style.cssText=`\n            background-color: #222;\n            color: #ddd;\n            font-family: Monospace;\n    \n            display: none;\n            flex-direction: column-reverse;\n    \n            padding: 0.4rem;\n\n            width: auto;\n            height: auto;\n\n            overflow-y: scroll;  \n            scrollbar-color: #aaa #444;\n            scrollbar-width: thin;\n            ${this.box.hasAttribute("style")?this.box.getAttribute("style"):""}\n        `,n.injectAnsiColorCSS()}log(e){const o=document.createElement("span");o.style.padding="0.25rem",o.innerHTML=n.format_colors(e),this.update(o)}warn(e){const o=document.createElement("span");o.style.padding="0.25rem",o.style.backgroundColor="#775522",o.style.color="#FFF",o.style.fontWeight="bold",o.innerHTML=n.warn_icon+" "+n.format_colors(e),this.update(o)}error(e){const o=document.createElement("span");o.style.padding="0.25rem",o.style.backgroundColor="#772222",o.innerHTML=n.format_colors(e),this.update(o)}clear(){this.box.style.display="none",this.box.innerHTML=""}update(n){this.box.style.display="flex",setTimeout((()=>{this.box.childNodes.length>32&&this.box.lastChild.remove(),this.box.insertBefore(n,this.box.firstChild)}))}static injectAnsiColorCSS(){if(null!==document.querySelector("style#ansi"))return;const n=document.createElement("style");n.setAttribute("id","ansi"),n.innerHTML="\n            span.ansi-30 { color: black; }\n            span.ansi-31 { color: red; }\n            span.ansi-32 { color: green; }\n            span.ansi-33 { color: yellow; }\n            span.ansi-34 { color: blue; }\n            span.ansi-35 { color: magenta; }\n            span.ansi-36 { color: cyan; }\n            span.ansi-37 { color: white; }\n\n            span.ansi-90 { color: #9B9B9B; }\n            span.ansi-91 { filter: brightness(0.5); color: red; }\n            span.ansi-92 { filter: brightness(0.5); color: green; }\n            span.ansi-93 { filter: brightness(0.5); color: yellow; }\n            span.ansi-94 { filter: brightness(0.5); color: blue; }\n            span.ansi-95 { filter: brightness(0.5); color: magenta; }\n            span.ansi-96 { filter: brightness(0.5); color: cyan; }\n            span.ansi-97 { filter: brightness(0.5); color: white; }\n\n            span.ansi-30-41 { background-color: red; color: black; white-space-collapse: break-spaces; font-weight: bold;}\n        ",document.getElementsByTagName("head")[0].appendChild(n)}static format_colors(n){return n.replaceAll(/\x1b\[(0)?([0-9;]*)m/g,((n,e,o)=>e?"</span>":`<span class="ansi-${o.replaceAll(";","-")}">`))}}n.warn_icon='<span style="color: yellow; font-size: 1.4em; font-weight: normal; white-space-collapse: preserve; margin: 0px 0px 0px 0.2em;">&#x26A0;</span>',window.lu5.Console=n})();